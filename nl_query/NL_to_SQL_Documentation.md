

# Documentation: Natural Language to SQL Conversion with NLP Model

### 1. How NL to SQL Conversion is Handled

The core feature of this project is converting user questions in natural language (English) into SQL queries that fetch data from the database.

* When a user submits a question (like “Show all customers”), the backend sends this text to an NLP model—in this case, Google Generative AI.
* The model is prompted specifically to **generate only safe, read-only SQL SELECT statements** based on the input.
* This means the model “translates” plain English into a structured SQL query, understanding the database schema implicitly from prompt design.
* Once the SQL is generated, the backend validates it to ensure it starts with `SELECT` to avoid dangerous commands (like DELETE or UPDATE).
* The safe SQL query is then executed on the database, and the results are returned to the user.

This process enables users to get answers from the database without writing any SQL themselves.

---

### 2. Examples of Successful Queries

Here are some typical input queries and their converted SQL queries generated by the model:

| Natural Language Query                 | Generated SQL Query                                                     |
| -------------------------------------- | ----------------------------------------------------------------------- |
| Show all customers                     | `SELECT * FROM customers;`                                              |
| List all pending processes             | `SELECT * FROM processes WHERE status='pending';`                       |
| How many documents has John submitted? | `SELECT COUNT(*) FROM document_submissions WHERE customer_name='John';` |

SEE THE SCREENSHOTS 
![SUCCESSFULL QUERY](nl_query/docs/screenshots/success.png)

![SUCCESSFULL QUERY](nl_query/docs/screenshots/success (2).png)

### 3. Example of Error Handling

Sometimes, the user’s input or the model’s output might not be valid or safe to execute. For example:

* **User Input:** “Delete all customers”
* **Model Output:** `DELETE FROM customers;`

In this case, the backend detects the SQL query does **not** start with `SELECT`, so it **rejects the query** and returns an error response like:

```json
{
  "error": "Only SELECT queries are allowed for security reasons.",
  "sql": "DELETE FROM customers;"
}
```
![Error message example](nl_query/docs/screenshots/error.png)
The frontend displays a friendly error message, informing the user that only read-only queries are permitted.

This validation step protects the database from accidental or malicious data changes.



